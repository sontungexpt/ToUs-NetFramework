<UserControl
    x:Class="ToUs.View.HomePageView.UserView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Icon="http://metro.mahapps.com/winfx/xaml/iconpacks"
    xmlns:customcontrol="clr-namespace:ToUs.Resources.CustomControl"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:local="clr-namespace:ToUs.View.HomePageView"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:viewmodel="clr-namespace:ToUs.ViewModel.HomePageViewModel"
    HorizontalAlignment="Left"
    d:DesignWidth="2500"
    FontFamily="Segoe UI"
    Style="{StaticResource Page_Style}"
    mc:Ignorable="d">

    <UserControl.DataContext>
        <viewmodel:UserViewModel />
    </UserControl.DataContext>

    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis" />
    </UserControl.Resources>

    <Grid
        x:Name="GridUserView"
        Width="1740"
        Height="1080"
        HorizontalAlignment="Right"
        Background="Transparent">

        <Grid.Resources />

        <Grid.RowDefinitions>

            <RowDefinition Height="auto" />

            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!--  Header  -->
        <Grid
            x:Name="GridHeader"
            Grid.Row="0"
            Margin="46,95,46,0">

            <TextBlock
                Height="81"
                MaxWidth="364"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                SnapsToDevicePixels="True"
                Style="{StaticResource TextHeader}"
                Text="TRANG CHỦ" />

            <StackPanel>

                <!--<Ellipse Height="75"
                             Width="75"
                             VerticalAlignment="Top">

                        <Ellipse.Fill>
                            <ImageBrush ImageSource="/Resources/Images/open-folder.png" />
                        </Ellipse.Fill>
                    </Ellipse>-->

                <StackPanel>

                    <TextBlock
                        x:Name="TextDateTime"
                        Height="24"
                        FontSize="18"
                        Foreground="{StaticResource FifthForegroundColor}"
                        Style="{StaticResource txtPrimary}"
                        Text="Chủ nhật, ngày 01 tháng 01 năm 2023"
                        TextAlignment="Right" />

                    <TextBlock
                        Width="648"
                        MaxWidth="900"
                        Margin="0,0,0,0"
                        Padding="0"
                        HorizontalAlignment="Right"
                        FontSize="30"
                        Foreground="{StaticResource ThirdForegroundColor}"
                        TextAlignment="Right"
                        TextWrapping="WrapWithOverflow">
                        Chào mừng<Run
                            FontWeight="SemiBold"
                            Foreground="{StaticResource FifthForegroundColor}"
                            Text="{Binding CurrenUserName, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
                        đã đến với<Run
                            FontWeight="SemiBold"
                            Foreground="{StaticResource FifthForegroundColor}"
                            Text=" ToUs!" />
                    </TextBlock>
                </StackPanel>
            </StackPanel>
        </Grid>

        <Grid
            x:Name="GridSettings"
            Grid.Row="1"
            Margin="46,32,43,34">

            <Grid.ColumnDefinitions>

                <ColumnDefinition Width="*" />

                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!--  "Thiết lập"  -->
            <StackPanel HorizontalAlignment="Left">

                <TextBlock
                    HorizontalAlignment="Center"
                    VerticalAlignment="Top"
                    FontSize="45"
                    Style="{StaticResource TextHeader}"
                    Text="THIẾT LẬP" />
                <Border
                    x:Name="BorderInfor"
                    Width="686"
                    Height="200"
                    Style="{StaticResource BorderStyle}">

                    <StackPanel Margin="40,7,40,12">

                        <StackPanel Height="86" Orientation="Horizontal">

                            <TextBlock
                                Height="51"
                                FontSize="36"
                                FontWeight="SemiBold"
                                Style="{StaticResource TextHeader}"
                                Text="Học kỳ - năm" />

                            <!--  Thêm list  -->
                            <ComboBox
                                x:Name="ComboBoxSemester"
                                Width="160"
                                Height="60"
                                Margin="30,0,0,0"
                                Padding="10,5"
                                materialDesign:HintAssist.Hint="Học kỳ"
                                Background="Transparent"
                                BorderBrush="{StaticResource FifthForegroundColor}"
                                BorderThickness="4"
                                Cursor="Hand"
                                FontSize="30"
                                FontWeight="SemiBold"
                                Foreground="{StaticResource FifthForegroundColor}"
                                ItemsSource="{Binding Semesters}"
                                SelectedItem="{Binding SelectedSemester, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                Style="{StaticResource MaterialDesignOutlinedComboBox}" />

                            <ComboBox
                                x:Name="ComboBoxYear"
                                Width="160"
                                Height="60"
                                Margin="32,0,0,0"
                                Padding="10,5"
                                materialDesign:HintAssist.Hint="Năm"
                                Background="Transparent"
                                BorderBrush="{StaticResource FifthForegroundColor}"
                                BorderThickness="4"
                                Cursor="Hand"
                                FontSize="30"
                                FontWeight="SemiBold"
                                Foreground="{StaticResource FifthForegroundColor}"
                                ItemsSource="{Binding SchoolYears}"
                                SelectedItem="{Binding SelectedSchoolYear, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                Style="{StaticResource MaterialDesignOutlinedComboBox}" />
                        </StackPanel>

                        <StackPanel Margin="0,22,0,0" Orientation="Horizontal">

                            <TextBlock
                                Height="55"
                                FontSize="36"
                                FontWeight="SemiBold"
                                Style="{StaticResource TextHeader}"
                                Text="Tên" />

                            <customcontrol:SearchBar
                                Width="394"
                                Height="76"
                                Margin="180,0,0,0"
                                FontSize="30"
                                IsSearchBar="False"
                                MyPadding="25 5 0 0"
                                MyWidth="353"
                                RenderTransformOrigin="0.515,0.683"
                                TextBehind=""
                                TextInput="{Binding TableName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                        </StackPanel>
                    </StackPanel>
                </Border>

                <Border
                    x:Name="BorderAutomatic"
                    Width="686"
                    Height="450"
                    Margin="0,28,0,0"
                    Style="{StaticResource BorderStyle}">

                    <Grid>

                        <StackPanel
                            x:Name="SPClient"
                            Width="431"
                            Height="96"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Panel.ZIndex="5"
                            Visibility="Collapsed">

                            <StackPanel.Resources>

                                <Style TargetType="StackPanel">

                                    <Style.Triggers>

                                        <DataTrigger Binding="{Binding IsUser, UpdateSourceTrigger=PropertyChanged}" Value="False">

                                            <DataTrigger.EnterActions>

                                                <BeginStoryboard>

                                                    <Storyboard>

                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)">

                                                            <DiscreteObjectKeyFrame KeyTime="00:00:00" Value="{x:Static Visibility.Visible}" />
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </DataTrigger.EnterActions>

                                            <DataTrigger.ExitActions>

                                                <BeginStoryboard>

                                                    <Storyboard>

                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)">

                                                            <DiscreteObjectKeyFrame KeyTime="00:00:00" Value="{x:Static Visibility.Collapsed}" />
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </DataTrigger.ExitActions>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </StackPanel.Resources>

                            <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">

                                <TextBlock
                                    FontSize="36"
                                    Foreground="{StaticResource ThirdForegroundColor}"
                                    Text="Vui Lòng" />

                                <Button
                                    Width="180"
                                    Height="46"
                                    Margin="10,0,0,0"
                                    Style="{StaticResource btnText}">

                                    <TextBlock
                                        d:IsLocked="True"
                                        FontSize="36"
                                        FontWeight="SemiBold"
                                        Foreground="#665D8C"
                                        Style="{StaticResource txtPrimary}"
                                        Text="Đăng nhập"
                                        TextDecorations="Underline" />
                                </Button>
                            </StackPanel>

                            <TextBlock
                                FontSize="36"
                                Foreground="{StaticResource ThirdForegroundColor}"
                                Text="để mở khóa chức năng này" />
                        </StackPanel>

                        <StackPanel
                            x:Name="SPUser"
                            Margin="0,0,57,43"
                            IsEnabled="{Binding IsUser, Converter={StaticResource BoolToVis}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">

                            <StackPanel.Resources>

                                <Style TargetType="StackPanel">

                                    <Style.Triggers>

                                        <DataTrigger Binding="{Binding IsUser, UpdateSourceTrigger=PropertyChanged}" Value="False">

                                            <DataTrigger.EnterActions>

                                                <BeginStoryboard>

                                                    <Storyboard>

                                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)">

                                                            <EasingDoubleKeyFrame KeyTime="00:00:00" Value="0.2" />
                                                        </DoubleAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </DataTrigger.EnterActions>

                                            <DataTrigger.ExitActions>

                                                <BeginStoryboard>

                                                    <Storyboard>

                                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)">

                                                            <EasingDoubleKeyFrame KeyTime="00:00:00" Value="1" />
                                                        </DoubleAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </DataTrigger.ExitActions>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </StackPanel.Resources>

                            <StackPanel Margin="42,46,0,0" Orientation="Horizontal">

                                <TextBlock
                                    HorizontalAlignment="Left"
                                    FontSize="36"
                                    FontWeight="SemiBold"
                                    Style="{StaticResource TextHeader}"
                                    Text="Tự động" />

                                <customcontrol:ToggleButton Margin="25,0,0,0" MyIsChecked="{Binding IsAutomaticMode, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
                            </StackPanel>

                            <!--  Thêm biến IsUser  -->

                            <StackPanel
                                Margin="42,38,0,0"
                                Orientation="Horizontal"
                                Visibility="{Binding IsUser, Converter={StaticResource BoolToVis}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">

                                <!--  Txt Môn  -->
                                <TextBlock
                                    HorizontalAlignment="Left"
                                    FontSize="36"
                                    FontWeight="SemiBold"
                                    Style="{StaticResource TextHeader}"
                                    Text="Môn" />

                                <StackPanel Margin="75,0,0,0">

                                    <customcontrol:SearchBar
                                        x:Name="srcbChosenSubjectID"
                                        HorizontalAlignment="Left"
                                        IsEnabled="False"
                                        IsSearchBar="False"
                                        MouseDown="SearchBar_MouseDown"
                                        MyPadding="25 5 0 0"
                                        MyWidth="420"
                                        TextBehind="IT001 IT002 IT004 IT005"
                                        TextInput="{Binding ChosenSubjectID, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                    <!--  Error Message - Môn  -->
                                    <TextBlock
                                        x:Name="txblSubjectIDError"
                                        Margin="15,0,0,0"
                                        Style="{StaticResource txtError}"
                                        Text="{Binding SubjectIDErrorMessage, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
                                </StackPanel>
                            </StackPanel>

                            <StackPanel
                                Margin="42,38,0,0"
                                Orientation="Horizontal"
                                Visibility="{Binding IsUser, Converter={StaticResource BoolToVis}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">

                                <TextBlock
                                    HorizontalAlignment="Left"
                                    FontSize="36"
                                    FontWeight="SemiBold"
                                    Style="{StaticResource TextHeader}"
                                    Text="Thứ" />

                                <Grid Margin="100,0,0,0">

                                    <Grid.RowDefinitions>

                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="*" />
                                    </Grid.RowDefinitions>

                                    <!--  1st Row  -->
                                    <StackPanel Grid.Row="0" Orientation="Horizontal">

                                        <!--  Monday  -->
                                        <CheckBox
                                            x:Name="ckbMondayIsChecked"
                                            Margin="0,0,0,0"
                                            Click="CheckBox_Checked"
                                            Cursor="Hand"
                                            IsChecked="{Binding MondayIsChecked, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                            IsEnabled="False">

                                            <CheckBox.Style>

                                                <Style BasedOn="{StaticResource BtnSelectDay}" TargetType="{x:Type CheckBox}">

                                                    <Setter Property="TextBlock.Text" Value="2" />
                                                </Style>
                                            </CheckBox.Style>
                                        </CheckBox>

                                        <!--  Tuesday  -->
                                        <CheckBox
                                            x:Name="ckbTuesdayIsChecked"
                                            Margin="28,0,0,0"
                                            Click="CheckBox_Checked"
                                            Cursor="Hand"
                                            IsChecked="{Binding TuesdayIsChecked, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                            IsEnabled="False">

                                            <CheckBox.Style>

                                                <Style BasedOn="{StaticResource BtnSelectDay}" TargetType="{x:Type CheckBox}">

                                                    <Setter Property="TextBlock.Text" Value="3" />
                                                </Style>
                                            </CheckBox.Style>
                                        </CheckBox>

                                        <!--  Wednesday  -->
                                        <CheckBox
                                            x:Name="ckbWednesdayIsChecked"
                                            Margin="28,0,0,0"
                                            Click="CheckBox_Checked"
                                            Cursor="Hand"
                                            IsChecked="{Binding WednesdayIsChecked, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                            IsEnabled="False">

                                            <CheckBox.Style>

                                                <Style BasedOn="{StaticResource BtnSelectDay}" TargetType="{x:Type CheckBox}">

                                                    <Setter Property="TextBlock.Text" Value="4" />
                                                </Style>
                                            </CheckBox.Style>
                                        </CheckBox>
                                    </StackPanel>

                                    <!--  2nd Row  -->
                                    <StackPanel
                                        Grid.Row="1"
                                        Margin="0,10,0,0"
                                        Orientation="Horizontal">

                                        <!--  Thursday  -->
                                        <CheckBox
                                            x:Name="ckbThursdayIsChecked"
                                            Margin="0,0,0,0"
                                            Click="CheckBox_Checked"
                                            Cursor="Hand"
                                            IsChecked="{Binding ThursdayIsChecked, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                            IsEnabled="False">

                                            <CheckBox.Style>

                                                <Style BasedOn="{StaticResource BtnSelectDay}" TargetType="{x:Type CheckBox}">

                                                    <Setter Property="TextBlock.Text" Value="5" />
                                                </Style>
                                            </CheckBox.Style>
                                        </CheckBox>

                                        <!--  Friday  -->
                                        <CheckBox
                                            x:Name="ckbFridayIsChecked"
                                            Margin="28,0,0,0"
                                            Click="CheckBox_Checked"
                                            Cursor="Hand"
                                            IsChecked="{Binding FridayIsChecked, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                            IsEnabled="False">

                                            <CheckBox.Style>

                                                <Style BasedOn="{StaticResource BtnSelectDay}" TargetType="{x:Type CheckBox}">

                                                    <Setter Property="TextBlock.Text" Value="6" />
                                                </Style>
                                            </CheckBox.Style>
                                        </CheckBox>

                                        <!--  Saturday  -->
                                        <CheckBox
                                            x:Name="ckbSaturdayIsChecked"
                                            Margin="28,0,0,0"
                                            Click="CheckBox_Checked"
                                            Cursor="Hand"
                                            IsChecked="{Binding SaturdayIsChecked, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                            IsEnabled="False">

                                            <CheckBox.Style>

                                                <Style BasedOn="{StaticResource BtnSelectDay}" TargetType="{x:Type CheckBox}">

                                                    <Setter Property="TextBlock.Text" Value="7" />
                                                </Style>
                                            </CheckBox.Style>
                                        </CheckBox>

                                        <!--  All  -->
                                        <CheckBox
                                            x:Name="ckbAllIsChecked"
                                            Margin="28,0,0,0"
                                            Click="CheckBox_Checked"
                                            Cursor="Hand"
                                            IsChecked="{Binding AllIsChecked, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                            IsEnabled="False">
                                            <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="Checked">
                                                    <i:InvokeCommandAction Command="{Binding CheckedAllCommand}" />
                                                </i:EventTrigger>

                                                <i:EventTrigger EventName="Unchecked">
                                                    <i:InvokeCommandAction Command="{Binding UnCheckedAllCommand}" />
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>

                                            <CheckBox.Style>

                                                <Style BasedOn="{StaticResource BtnSelectDay}" TargetType="{x:Type CheckBox}">

                                                    <Setter Property="TextBlock.Text" Value="Tất cả" />
                                                </Style>
                                            </CheckBox.Style>
                                        </CheckBox>
                                    </StackPanel>

                                    <!--  Error Message - Thứ  -->
                                    <TextBlock
                                        x:Name="txblChooseDayError"
                                        Grid.Row="2"
                                        Margin="15,0,0,0"
                                        Style="{StaticResource txtError}"
                                        Text="{Binding ChooseDayErrorMessage, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
                                </Grid>
                            </StackPanel>
                        </StackPanel>
                    </Grid>
                </Border>

                <Grid Height="54" Margin="0,36,0,0">

                    <Button
                        Height="50"
                        HorizontalAlignment="Left"
                        Command="{Binding ClearAllTableInfoCommand}"
                        Style="{StaticResource btnText}">

                        <TextBlock
                            FontSize="36"
                            Foreground="#665D8C"
                            Style="{StaticResource txtPrimary}"
                            Text="Đặt lại"
                            TextDecorations="Underline" />
                    </Button>

                    <Button
                        Width="156"
                        Height="50"
                        HorizontalAlignment="Right"
                        materialDesign:ButtonAssist.CornerRadius="10"
                        Background="{StaticResource PrimaryColor}"
                        Command="{Binding SaveTableCommand}"
                        Style="{StaticResource MaterialDesignRaisedButton}">

                        <i:Interaction.Triggers>
                            <i:DataTrigger Binding="{Binding Path=IsDoneCreateTable}" Value="true">
                                <i:InvokeCommandAction Command="{Binding SwitchToNormalScheduleViewCommand}" />
                            </i:DataTrigger>
                        </i:Interaction.Triggers>

                        <StackPanel Orientation="Horizontal">

                            <Icon:PackIconMaterial
                                Width="36"
                                Height="36"
                                Margin="0,0,10,0"
                                VerticalAlignment="Center"
                                Panel.ZIndex="100"
                                Background="Transparent"
                                Foreground="{StaticResource FifthPrimaryColor}"
                                Kind="ContentSave" />

                            <TextBlock
                                Margin="0,0,0,0"
                                VerticalAlignment="Center"
                                FontSize="36"
                                FontWeight="Bold"
                                Foreground="{StaticResource FifthPrimaryColor}"
                                Text="LƯU" />

                            <ContentPresenter VerticalAlignment="Center" />
                        </StackPanel>
                    </Button>
                </Grid>
            </StackPanel>

            <!--  Bảng "Thời khóa biểu đã lưu"  -->
            <StackPanel Grid.Column="2" HorizontalAlignment="Right">

                <TextBlock
                    HorizontalAlignment="Center"
                    VerticalAlignment="Top"
                    FontSize="45"
                    Style="{StaticResource TextHeader}"
                    Text="THỜI KHÓA BIỂU ĐÃ LƯU" />

                <Border
                    Width="786"
                    Height="766"
                    Style="{StaticResource BorderStyle}">

                    <Grid>

                        <StackPanel
                            x:Name="SecondSPClient"
                            Width="431"
                            Height="96"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Panel.ZIndex="5"
                            Visibility="Collapsed">

                            <StackPanel.Resources>

                                <Style TargetType="StackPanel">

                                    <Style.Triggers>

                                        <DataTrigger Binding="{Binding IsUser, UpdateSourceTrigger=PropertyChanged}" Value="False">

                                            <DataTrigger.EnterActions>

                                                <BeginStoryboard>

                                                    <Storyboard>

                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)">

                                                            <DiscreteObjectKeyFrame KeyTime="00:00:00" Value="{x:Static Visibility.Visible}" />
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </DataTrigger.EnterActions>

                                            <DataTrigger.ExitActions>

                                                <BeginStoryboard>

                                                    <Storyboard>

                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)">

                                                            <DiscreteObjectKeyFrame KeyTime="00:00:00" Value="{x:Static Visibility.Collapsed}" />
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </DataTrigger.ExitActions>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </StackPanel.Resources>

                            <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">

                                <TextBlock
                                    FontSize="36"
                                    Foreground="{StaticResource ThirdForegroundColor}"
                                    Text="Vui Lòng" />

                                <Button
                                    Width="180"
                                    Height="46"
                                    Margin="10,0,0,0"
                                    Style="{StaticResource btnText}">

                                    <TextBlock
                                        d:IsLocked="True"
                                        FontSize="36"
                                        FontWeight="SemiBold"
                                        Foreground="#665D8C"
                                        Style="{StaticResource txtPrimary}"
                                        Text="Đăng nhập"
                                        TextDecorations="Underline" />
                                </Button>
                            </StackPanel>

                            <TextBlock
                                FontSize="36"
                                Foreground="{StaticResource ThirdForegroundColor}"
                                Text="để mở khóa chức năng này" />
                        </StackPanel>

                        <ScrollViewer x:Name="SavedTimetable" BorderThickness="0">

                            <ScrollViewer.Resources>

                                <Style TargetType="ScrollViewer">

                                    <Style.Triggers>

                                        <DataTrigger Binding="{Binding IsUser, UpdateSourceTrigger=PropertyChanged}" Value="False">

                                            <DataTrigger.EnterActions>

                                                <BeginStoryboard>

                                                    <Storyboard>

                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)">

                                                            <DiscreteObjectKeyFrame KeyTime="00:00:00" Value="{x:Static Visibility.Collapsed}" />
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </DataTrigger.EnterActions>

                                            <DataTrigger.ExitActions>

                                                <BeginStoryboard>

                                                    <Storyboard>

                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)">

                                                            <DiscreteObjectKeyFrame KeyTime="00:00:00" Value="{x:Static Visibility.Visible}" />
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </DataTrigger.ExitActions>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </ScrollViewer.Resources>

                            <ListView
                                x:Name="ListTimeTableName"
                                Width="750"
                                Margin="20"
                                Padding="28"
                                HorizontalAlignment="Left"
                                Background="Transparent"
                                ItemsSource="{Binding TimeTables}"
                                SnapsToDevicePixels="True">

                                <ListView.ItemsPanel>

                                    <ItemsPanelTemplate>
                                        <UniformGrid Columns="2" />
                                    </ItemsPanelTemplate>
                                </ListView.ItemsPanel>

                                <ListView.ItemTemplate>

                                    <DataTemplate>

                                        <StackPanel x:Name="gridItemControl">
                                            <Button
                                                x:Name="ButtonAddTimetable"
                                                Click="ViewOldTimeTable_Click"
                                                Cursor="Hand"
                                                Style="{StaticResource btnAddTimetable}" />

                                            <TextBlock
                                                x:Name="OldTimeTableName"
                                                Margin="0,10,0,0"
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Top"
                                                FontSize="36"
                                                Foreground="{StaticResource FifthForegroundColor}"
                                                Style="{StaticResource txtHeader2}"
                                                Text="{Binding Name}" />
                                        </StackPanel>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>

                            <!--<ItemsControl
                                x:Name="ListTimeTableName"
                                Margin="0,0,0,0"
                                Padding="28"
                                HorizontalAlignment="Center"
                                ItemsSource="{Binding TimeTables}"
                                SnapsToDevicePixels="True">

                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>

                                        <StackPanel x:Name="gridItemControl">
                                            <Button
                                                x:Name="ButtonAddTimetable"
                                                Command="{Binding SwitchToPreviewCommand}"
                                                Style="{StaticResource btnAddTimetable}" />
                                            <TextBlock
                                                Margin="0,10,0,0"
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Top"
                                                FontSize="36"
                                                Foreground="{StaticResource FifthForegroundColor}"
                                                Style="{StaticResource txtHeader2}"
                                                Text="{Binding Name}" />
                                        </StackPanel>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>

                                <ItemsControl.ItemsPanel>

                                    <ItemsPanelTemplate>
                                        <WrapPanel />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                            </ItemsControl>-->
                        </ScrollViewer>
                    </Grid>
                </Border>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>